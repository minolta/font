<mat-form-field>
  <mat-label>Job name</mat-label>
  <input
    type="text"
    matInput
    [(ngModel)]="pijob.name"
    placeholder="Job name"
    onclick="select()"
  />
</mat-form-field>
<!-- <kyl-kyauto [service]="ds" [bag]="devicebag" [p]="'For Device'" [widthvalue]="'400px'"></kyl-kyauto>
<kyl-kyauto [service]="dss" [bag]="dssensorbag" [p]="'Ds Sensor'" [widthvalue]="'400px'"></kyl-kyauto>
<kyl-kyauto [service]="ds" [bag]="devicedesbag" [p]="'Target Device'" [widthvalue]="'400px'"></kyl-kyauto> -->

<app-auto [service]="ds" [(obj)]="device" [p]="'Device'"   [label]="'For Device'"></app-auto>
<app-auto

  [service]="dss"
  [(obj)]="devicesensor"
  [p]="'Device sensor'"
></app-auto>
<app-auto [service]="ds" [(obj)]="devicedes" [p]="'Device traget'"   [label]="'Traget Device'"></app-auto>

<button mat-button (click)="addsensor()">+</button>
<mat-divider></mat-divider>
<mat-form-field>
  <mat-label>T low</mat-label>
  <input
    type="number"
    matInput
    placeholder="T Low"
    [(ngModel)]="pijob.tlow"
    onclick="select()"
  />
</mat-form-field>
<mat-form-field>
  <mat-label>T high</mat-label>
  <input
    type="number"
    matInput
    placeholder="T High"
    [(ngModel)]="pijob.thigh"
    onclick="select()"
  />
</mat-form-field>

<mat-form-field>
  <mat-label>H low</mat-label>
  <input
    type="number"
    matInput
    placeholder="H Low"
    [(ngModel)]="pijob.hlow"
    onclick="select()"
  />
</mat-form-field>
<mat-form-field>
  <mat-label>H high</mat-label>
  <input
    type="number"
    matInput
    placeholder="H High"
    [(ngModel)]="pijob.hhigh"
    onclick="select()"
  />
</mat-form-field>
<mat-form-field>
  <mat-label>Time to run</mat-label>
  <input
    type="number"
    matInput
    placeholder="Time to run"
    [(ngModel)]="pijob.timetorun"
    onclick="select()"
  />
</mat-form-field>
<mat-form-field
  >
  
  <mat-label>Start time</mat-label><input
    matInput
    type="time"
    [(ngModel)]="pijob.stimes"
    placeholder="เวลาเริ่มต้นของวัน"
  />
</mat-form-field>

<mat-form-field>
  <mat-label>End time</mat-label>
  <input
    matInput
    type="time"
    [(ngModel)]="pijob.etimes"
    placeholder="เวลาสิ้นสุดของวัน"
  />
</mat-form-field>
<app-datetime [(datetime)]="pijob.sdate" [dl]="'Start Date'"></app-datetime>
<app-datetime [(datetime)]="pijob.edate" [dl]="'End Date'"></app-datetime>
<mat-form-field>
  <mat-label>Run time </mat-label>
  <input
    type="number"
    matInput
    placeholder="Run time (in secound)"
    [(ngModel)]="pijob.runtime"
    onclick="select()"
  />
</mat-form-field>

<mat-form-field>
  <mat-label>Wait time </mat-label>
  <input
    type="number"
    matInput
    placeholder="wait time (in secound)"
    [(ngModel)]="pijob.waittime"
    onclick="select()"
  />
</mat-form-field>
<mat-form-field>
  <mat-label>Priority</mat-label>
  <input
    type="number"
    matInput
    placeholder="priority"
    [(ngModel)]="pijob.priority"
  />
</mat-form-field>
<!-- <kyl-kyauto [service]="js" [bag]="jobbag" [p]="'Job type'" [widthvalue]="'400px'"></kyl-kyauto>
 -->
<app-auto [service]="js" [(obj)]="jobtype" [p]="'Job type'"  [label]="'Job type'"></app-auto>
<mat-checkbox [(ngModel)]="pijob.enable" i18n>Enable</mat-checkbox>
<app-auto 
  [service]="pijobgroupservice"
  [(obj)]="pijobgroup"
  [p]="'Job group'" [label]="'Job group'"
></app-auto>
<!-- <kyl-kyauto [service]="pijobgroupservice" [bag]="pijobgroupbag" [p]="'Job group'" [widthvalue]="'250px'"></kyl-kyauto> -->
<!-- <app-auto
  [service]="pijobgroupservice"
  [(obj)]="pijobgroup"
  [p]="'Pijob group'"
></app-auto> -->
<button mat-button (click)="delete(pijob)">
  <label i18n>Delete pijob</label>
</button>

<mat-form-field>
  <textarea
    matInput
    [(ngModel)]="pijob.description"
    placeholder="Description"
    >{{ pijob.description }}</textarea
  >
</mat-form-field>
<mat-form-field>
  <mat-label>Token</mat-label>
  <input type="text" matInput [(ngModel)]="pijob.token" placeholder="Token for line" />
</mat-form-field>
<!-- <kyl-kyauto
  [service]="pjs"
  [bag]="runwithbag"
  [p]="'Run with'"
  [widthvalue]="'400px'"
></kyl-kyauto> -->
<button mat-button (click)="save()" i18n>Save</button>
<table id="customers">
  <tr>
    <td>Enable</td>
    <td>Target</td>
    <td>Port</td>
    <td>Logic</td>
    <td>Run time</td>
    <td>Wait time</td>
    <td>Option</td>
  </tr>

  <tr *ngFor="let p of ports">
    <td>
      <mat-checkbox [(ngModel)]="p.enable" color="primary">Enable</mat-checkbox>
    </td>
    <td>
      <!-- <kyl-kyauto [service]="ds" [p]="'Target'" [(obj)]="p.device" [bag]="p.device"></kyl-kyauto> -->
      <app-auto [service]="ds" [p]="'Traget'"  [label]="'Traget device'"  [(obj)]="p.device"></app-auto>
    </td>
    <td>
      <!-- <kyl-kyauto
        [service]="pns"
        [p]="'Portname'"
        [bag]="p.portname"
      ></kyl-kyauto> -->

      <app-auto [service]="pns" [p]="'Port'" [(obj)]="p.portname"  [label]="'Port name'"></app-auto>
    </td>
    <td>
      <!-- <kyl-kyauto [service]="ls" [p]="'Logic'" [bag]="p.status"></kyl-kyauto> -->
      <app-auto [service]="ls" [p]="'Logic'"   [label]="'Logic'" [(obj)]="p.status"></app-auto>
    </td>
    <td>
      <mat-form-field>
        <mat-label>Runtime</mat-label>
        <input
          type="number"
          matInput
          placeholder="Run time (in secound)"
          onclick="select()"
          [(ngModel)]="p.runtime"
        />
      </mat-form-field>
    </td>
    <td>
      <mat-form-field>
        <mat-label>Wait time</mat-label>
        <input
          type="number"
          matInput
          placeholder="wait time (in secound)"
          onclick="select()"
          [(ngModel)]="p.waittime"
        />
      </mat-form-field>
    </td>
    <td>
      <button mat-button (click)="removeport(p)">
        <mat-icon>remove</mat-icon>
        <label i18n>remove</label>
      </button>
    </td>
  </tr>
</table>
<button mat-button (click)="addport()"><mat-icon>add</mat-icon>Add port</button>
<button mat-button (click)="save()" i18n>Save</button>
<button mat-button (click)="copy()" i18n>Copy</button>

<hr />
<!-- <kyl-kyauto
  [service]="ds"
  [bag]="pumpbag"
  [p]="'Pump'"
  [widthvalue]="'400px'"
></kyl-kyauto> -->
<app-auto [service]="ds" [(obj)]="pump" [p]="'Pump'"  [label]="'Pump'"></app-auto>
<!-- <kyl-kyauto
  [service]="pns"
  [bag]="pbag"
  [p]="'Port '"
  [widthvalue]="'400px'"
></kyl-kyauto> -->
<app-auto [service]="pns" [(obj)]="pn" [p]="'Port'" [label]="'Port'"></app-auto>
<button mat-button (click)="addpump()">Add pump</button>
<mat-divider></mat-divider>
<table id="customers">
  <tr>
    <td>Pump</td>
    <td>x</td>
  </tr>
  <tr *ngFor="let p of pumps">
    <td>{{ p.pidevice?.name }}</td>
    <!-- <td>{{p.portname.name}}</td> -->
    <td>{{ p.portname?.name }}</td>
    <td>
      <mat-checkbox [(ngModel)]="p.enable" (click)="enablepumps(p)"
        >enable</mat-checkbox
      >
    </td>
    <td><button mat-button (click)="removepump(p.id!!)">remove</button></td>
  </tr>
</table>

<mat-divider></mat-divider>
<table id="customres" *ngIf="sensors && sensors.length > 0">
  <tr *ngFor="let s of sensors; index as i">
    <td>{{ s.sensor!!.name }}</td>
    <td><button mat-button (click)="removesensor(s.id!!, i)">X</button></td>
  </tr>
</table>
